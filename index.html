<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misterpips - Trading Professionnel</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="vip-styles.css">
    <link rel="stylesheet" href="mobile-responsive.css">
    <link rel="stylesheet" href="mobile-fixes-complete.css">
    <link rel="stylesheet" href="mobile-menu-index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyDSDK0NfVSs_VQb3TnrixiJbOpTsmoUMvU",
            authDomain: "misterpips-b71fb.firebaseapp.com",
            databaseURL: "https://misterpips-b71fb-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "misterpips-b71fb",
            storageBucket: "misterpips-b71fb.firebasestorage.app",
            messagingSenderId: "574231126409",
            appId: "1:574231126409:web:b7ed93ac4ea62e247dc158"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        window.firebaseAuth = { auth, signInWithEmailAndPassword };
    </script>
</head>
<body>
    <div id="trading-chart"></div>
    
    <header>
        <div class="logo-container">
            <img src="Misterpips.jpg" alt="Misterpips Logo" class="logo">
        </div>
        <nav>
            <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="#presentation">Pr√©sentation</a></li>
                <li><a href="#apprentissage">Apprentissage</a></li>
                <li><a href="#exercices">Exercices</a></li>
                <li><a href="#about">√Ä propos de nous</a></li>
                <li><a href="#avis">Vos avis</a></li>
                <li><a href="#contact">Nous contacter</a></li>
                <li><a href="#" class="vip-login-nav" id="vipLoginNav">üîë CONNEXION VIP</a></li>
                <li><a href="#apprentissage" class="ebook-link-nav">üìö EBOOK GRATUIT</a></li>
            </ul>
            <div id="navOverlay" class="nav-overlay"></div>
        </nav>
    </header>

    <main>
        <section id="hero">
            <div class="hero-content">
                <h1>Bienvenue chez Misterpips</h1>
                <p>Votre partenaire pour ma√Ætriser l'art du trading</p>
                <div class="cta-buttons">
                    <a href="#vip" class="cta-button">Rejoindre notre programme VIP</a>
                    <a href="https://t.me/misterpips" class="telegram-button" target="_blank">
                        <i class="fab fa-telegram"></i> Rejoindre Telegram
                    </a>
                </div>
            </div>
        </section>

        <!-- Section News -->
        <section id="news" class="section">
            <div class="container">
                <h2>Actualit√©s Misterpips</h2>
                <div id="news-grid" class="news-grid">
                    <!-- Les news seront charg√©es dynamiquement -->
                </div>
            </div>
        </section>

        <section id="presentation" class="section">
            <div class="container">
                <h2 id="presentation-title">Pr√©sentation</h2>
                <div id="presentation-content" class="section-content">
                    <div class="construction-container">
                        <div class="construction-icon">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <h3>Section en construction</h3>
                        <p>Notre √©quipe travaille actuellement sur du contenu exceptionnel pour cette section.</p>
                        <p>Revenez bient√¥t pour d√©couvrir nos services!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="apprentissage" class="section">
            <div class="container">
                <h2>Apprentissage</h2>
                <div class="learning-content">
                    <div class="priority-ebook">
                        <div class="ebook-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3>üìö Ebook Fondamental - √Ä lire en PREMIER !</h3>
                        <div class="ebook-highlight">
                            <p><strong>IMPORTANT:</strong> Cette ebook doit √™tre lu et analys√© en premier avant d'aller plus loin dans l'apprentissage.</p>
                            <p>Cette ebook constitue la <strong>base d'apprentissage essentielle</strong> qui regroupe les meilleurs concepts de trading utilis√©s par l'√©quipe Misterpips.</p>
                            <a href="https://github.com/battama14/Misterpips/raw/e664f568b9b95d9853368e723f31f2cc9f9ff1c6/pips%20book2.pdf" class="ebook-button" download="Ebook-Misterpips-Fondamental.pdf" target="_blank" onclick="trackEbookDownload()">
                                <i class="fas fa-download"></i> T√©l√©charger l'Ebook Fondamental
                            </a>
                            <a href="https://github.com/battama14/Misterpips/blob/e664f568b9b95d9853368e723f31f2cc9f9ff1c6/pips%20book2.pdf" class="ebook-button-alt" target="_blank" style="margin-top: 10px; background: #34495e;">
                                <i class="fas fa-external-link-alt"></i> Voir l'Ebook en ligne
                            </a>
                        </div>
                    </div>
                    
                    <div class="learning-next-steps">
                        <div class="construction-container">
                            <div class="construction-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <h3>Contenu avanc√© en pr√©paration</h3>
                            <p>Une fois que vous aurez ma√Ætris√© les concepts de base de notre ebook, du contenu avanc√© sera disponible ici.</p>
                            <p>Notre √©quipe travaille actuellement sur des m√©thodes d'apprentissage avanc√©es!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="exercices" class="section">
            <div class="container">
                <h2 id="exercices-title">Exercices</h2>
                <div id="exercices-content" class="section-content">
                    <div class="construction-container">
                        <div class="construction-icon">
                            <i class="fas fa-hammer"></i>
                        </div>
                        <h3>Section en construction</h3>
                        <p>Notre √©quipe travaille actuellement sur du contenu exceptionnel pour cette section.</p>
                        <p>Revenez bient√¥t pour d√©couvrir nos exercices pratiques!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="section">
            <div class="container">
                <h2 id="about-title">√Ä propos de nous</h2>
                <div id="about-content" class="section-content">
                    <div class="construction-container">
                        <div class="construction-icon">
                            <i class="fas fa-user-hard-hat"></i>
                        </div>
                        <h3>Section en construction</h3>
                        <p>Notre √©quipe travaille actuellement sur du contenu exceptionnel pour cette section.</p>
                        <p>Revenez bient√¥t pour en savoir plus sur notre √©quipe!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="avis" class="section">
            <div class="container">
                <h2>Vos avis</h2>
                <div id="testimonials-grid" class="testimonials-grid">
                    <!-- Les avis seront charg√©s dynamiquement -->
                </div>
            </div>
        </section>

        <section id="contact" class="section">
            <div class="container">
                <h2>Nous contacter</h2>
                <div class="contact-content">
                    <div class="contact-info">
                        <h3>Rejoignez notre communaut√©</h3>
                        <p>Connectez-vous avec nous sur nos r√©seaux sociaux pour recevoir les derni√®res analyses et conseils de trading.</p>
                        
                        <div class="contact-links">
                            <div class="social-icons-grid">
                                <a href="https://www.instagram.com/EVAN4SLM/" class="social-icon-link instagram-icon" target="_blank" title="Instagram: @EVAN4SLM">
                                    <i class="fab fa-instagram"></i>
                                    <span>@EVAN4SLM</span>
                                </a>
                                <a href="https://www.tiktok.com/@MISTERPIPS3" class="social-icon-link tiktok-icon" target="_blank" title="TikTok: @MISTERPIPS3">
                                    <i class="fab fa-tiktok"></i>
                                    <span>@MISTERPIPS3</span>
                                </a>
                                <a href="https://t.me/misterpips" class="social-icon-link telegram-icon" target="_blank" title="Canal principal Misterpips">
                                    <i class="fab fa-telegram-plane"></i>
                                    <span>Misterpips</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="vip" class="section vip-section">
            <div class="container">
                <h2>Programme VIP</h2>
                <div class="vip-content">
                    <div class="vip-hero">
                        <div class="vip-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <h3>Espace VIP Exclusif</h3>
                        <p>Acc√©dez √† nos outils professionnels de trading, analyses avanc√©es et dashboard personnalis√© r√©serv√©s aux membres VIP.</p>
                        <form id="vip-form" class="vip-form">
                            <input type="email" id="vip-email" placeholder="Email VIP" required>
                            <input type="password" id="vip-password" placeholder="Mot de passe" required>
                            <button type="submit" class="vip-dashboard-button">
                                <i class="fas fa-key"></i> Acc√©der √† l'espace VIP
                            </button>
                        </form>
                        <div class="vip-support-section">
                            <p class="support-text">Pas encore membre VIP ? Fais ta demande ici</p>
                            <button id="contactSupportBtn" class="support-button">
                                <i class="fas fa-headset"></i> Contacter le Support
                            </button>
                        </div>
                    </div>
                    <div class="vip-features">
                        <div class="feature-item">
                            <i class="fas fa-exchange-alt"></i>
                            <h4>Corr√©lations en Temps R√©el</h4>
                            <p>USD/JPY, GBP/USD, AUD/USD, USD/CHF</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-calendar-alt"></i>
                            <h4>Calendrier √âconomique</h4>
                            <p>Annonces importantes et impacts sur les devises</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-trending-up"></i>
                            <h4>Indicateurs de Tendance</h4>
                            <p>Analyses fondamentales automatis√©es</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal VIP Dashboard -->
        <div id="vipDashboardModal" class="vip-modal">
            <div class="vip-modal-content">
                <div class="vip-modal-header">
                    <h2><i class="fas fa-crown"></i> Tableau de Bord VIP Misterpips</h2>
                    <span class="vip-modal-close">&times;</span>
                </div>
                <div class="vip-modal-body">
                    <div class="dashboard-grid">
                        <!-- Corr√©lations des Devises -->
                        <div class="dashboard-card correlation-card">
                            <div class="card-header">
                                <h3><i class="fas fa-exchange-alt"></i> Corr√©lations Forex</h3>
                                <div class="refresh-btn" id="refreshCorrelations">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                            </div>
                            <div class="correlation-grid" id="correlationGrid">
                                <!-- Le contenu sera inject√© par JavaScript -->
                            </div>
                        </div>

                        <!-- Indicateurs de Tendance -->
                        <div class="dashboard-card trend-card">
                            <div class="card-header">
                                <h3><i class="fas fa-trending-up"></i> Tendances en Temps R√©el</h3>
                                <div class="refresh-btn" id="refreshTrends">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                            </div>
                            <div class="trends-grid" id="trendsGrid">
                                <!-- Le contenu sera inject√© par JavaScript -->
                            </div>
                        </div>

                        <!-- Calendrier √âconomique -->
                        <div class="dashboard-card calendar-card">
                            <div class="card-header">
                                <h3><i class="fas fa-calendar-alt"></i> Calendrier √âconomique</h3>
                                <div class="calendar-links">
                                    <a href="https://www.investing.com/economic-calendar/" target="_blank" class="calendar-link">
                                        <i class="fas fa-external-link-alt"></i> Investing.com
                                    </a>
                                    <a href="https://www.forexfactory.com/calendar" target="_blank" class="calendar-link">
                                        <i class="fas fa-external-link-alt"></i> ForexFactory
                                    </a>
                                </div>
                            </div>
                            <div class="calendar-widget">
                                <!-- Widget Investing.com alternatif -->
                                <div id="economicCalendarWidget">
                                    <!-- Calendrier √©conomique simplifi√© -->
                                    <div class="calendar-simple">
                                        <h4>üìÖ Calendrier √âconomique</h4>
                                        <p>Consultez les √©v√©nements √©conomiques importants :</p>
                                    </div>
                                    
                                    <!-- Fallback: liens directs si le widget ne se charge pas -->
                                    <div id="calendarFallback" class="calendar-fallback" style="display: none;">
                                        <h4>üìÖ Calendrier √âconomique</h4>
                                        <div class="fallback-links">
                                            <a href="https://fr.investing.com/economic-calendar/" target="_blank" class="calendar-fallback-link">
                                                <i class="fas fa-external-link-alt"></i>
                                                Voir le calendrier complet sur Investing.com
                                            </a>
                                            <a href="https://www.forexfactory.com/calendar" target="_blank" class="calendar-fallback-link">
                                                <i class="fas fa-external-link-alt"></i>
                                                Calendrier ForexFactory
                                            </a>
                                            <a href="https://www.dailyfx.com/economic-calendar" target="_blank" class="calendar-fallback-link">
                                                <i class="fas fa-external-link-alt"></i>
                                                Calendrier DailyFX
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Alertes et Analyses -->
                        <div class="dashboard-card alerts-card">
                            <div class="card-header">
                                <h3><i class="fas fa-bell"></i> Alertes & Analyses</h3>
                            </div>
                            <div class="alerts-content" id="alertsContent">
                                <!-- Le contenu sera inject√© par JavaScript -->
                            </div>
                        </div>

                        <!-- Performance des Pairs -->
                        <div class="dashboard-card performance-card">
                            <div class="card-header">
                                <h3><i class="fas fa-chart-bar"></i> Performance 24h</h3>
                                <div class="refresh-btn" id="refreshPerformance">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                            </div>
                            <div class="performance-content" id="performanceContent">
                                <!-- Le contenu sera inject√© par JavaScript -->
                            </div>
                        </div>

                        <!-- Actualit√©s Forex -->
                        <div class="dashboard-card news-card">
                            <div class="card-header">
                                <h3><i class="fas fa-newspaper"></i> Actualit√©s Forex</h3>
                            </div>
                            <div class="news-content" id="newsContent">
                                <!-- Le contenu sera inject√© par JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="Misterpips.jpg" alt="Misterpips Logo" class="footer-logo-img">
                <p>Misterpips - Votre partenaire de trading</p>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Navigation</h4>
                    <ul>
                        <li><a href="#presentation">Pr√©sentation</a></li>
                        <li><a href="#apprentissage">Apprentissage</a></li>
                        <li><a href="#exercices">Exercices</a></li>
                        <li><a href="#about">√Ä propos de nous</a></li>
                        <li><a href="#contact">Nous contacter</a></li>
                        <li><a href="#vip">Espace VIP</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Communaut√©</h4>
                    <ul>
                        <li><a href="https://www.instagram.com/EVAN4SLM/" target="_blank"><i class="fab fa-instagram"></i> Instagram @EVAN4SLM</a></li>
                        <li><a href="https://www.tiktok.com/@MISTERPIPS3" target="_blank"><i class="fab fa-tiktok"></i> TikTok @MISTERPIPS3</a></li>
                        <li><a href="https://t.me/misterpips" target="_blank"><i class="fab fa-telegram"></i> Canal Misterpips</a></li>
                    </ul>
                </div>
            </div>
            <div class="social-links">
                <a href="https://www.instagram.com/EVAN4SLM/" target="_blank" class="social-link instagram" title="Instagram @EVAN4SLM">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.tiktok.com/@MISTERPIPS3" target="_blank" class="social-link tiktok" title="TikTok @MISTERPIPS3">
                    <i class="fab fa-tiktok"></i>
                </a>
                <a href="https://t.me/misterpips" target="_blank" class="social-link telegram" title="Canal principal Misterpips">
                    <i class="fab fa-telegram-plane"></i>
                </a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Misterpips. Tous droits r√©serv√©s.</p>
            <p class="disclaimer">Le trading comporte des risques. Les performances pass√©es ne pr√©jugent pas des performances futures.</p>
        </div>
    </footer>

    <script src="script-simple.js"></script>
    <script src="mobile-menu.js"></script>
    <script src="mobile-menu-complete.js"></script>
    <script type="module">
        import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js';
        import { setPersistence, browserSessionPersistence } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
        
        // D√©finir la persistance
        await setPersistence(window.firebaseAuth.auth, browserSessionPersistence);
        
        document.getElementById('vip-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('vip-email').value;
            const password = document.getElementById('vip-password').value;
            
            try {
                const userCredential = await window.firebaseAuth.signInWithEmailAndPassword(window.firebaseAuth.auth, email, password);
                const user = userCredential.user;
                
                // Forcer le stockage des donn√©es de session et localStorage
                sessionStorage.setItem('firebaseUID', user.uid);
                sessionStorage.setItem('userEmail', user.email);
                sessionStorage.setItem('authenticated', 'true');
                sessionStorage.setItem('isVIP', 'true');
                
                localStorage.setItem('firebaseUID', user.uid);
                localStorage.setItem('userEmail', user.email);
                localStorage.setItem('authenticated', 'true');
                localStorage.setItem('isVIP', 'true');
                
                // V√©rifier si c'est la premi√®re connexion
                const db = getDatabase();
                const { get } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js');
                const userRef = ref(db, `users/${user.uid}`);
                const userSnapshot = await get(userRef);
                
                const isFirstLogin = !userSnapshot.exists() || !userSnapshot.val().hasLoggedIn;
                
                // Ajouter/mettre √† jour le statut VIP dans Realtime Database
                await set(userRef, {
                    email: user.email,
                    isVIP: true,
                    plan: 'VIP',
                    subscriptionDate: userSnapshot.exists() ? userSnapshot.val().subscriptionDate : new Date().toISOString(),
                    status: 'active',
                    hasLoggedIn: true,
                    lastLogin: new Date().toISOString(),
                    autoCreated: !userSnapshot.exists(),
                    timestamp: Date.now()
                });
                
                // Attendre la synchronisation
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Afficher le message de bienvenue seulement √† la premi√®re connexion
                if (isFirstLogin) {
                    showCustomPopup('F√âLICITATIONS ! Bienvenue dans la famille VIP - Misterpips', () => {
                        window.location.href = 'vip-space.html';
                    });
                } else {
                    // Redirection directe pour les connexions suivantes
                    window.location.href = 'vip-space.html';
                }
            } catch (error) {
                console.error('Erreur connexion:', error);
                alert('Identifiants incorrects: ' + error.message);
            }
        });
        
        // Gestionnaire pour le bouton de contact support
        document.getElementById('contactSupportBtn').addEventListener('click', () => {
            const telegramSupportUrl = 'https://t.me/misterpips_support';
            
            const message = `Pour devenir membre VIP, contactez notre support sur :\n\nüí¨ Telegram: @misterpips_support\n\nNous vous r√©pondrons rapidement !`;
            
            if (confirm(message + '\n\nVoulez-vous ouvrir Telegram maintenant ?')) {
                window.open(telegramSupportUrl, '_blank');
            }
        });
        
        // Gestionnaire pour le bouton de connexion VIP dans la navigation
        document.getElementById('vipLoginNav').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('vip').scrollIntoView({ behavior: 'smooth' });
            setTimeout(() => {
                document.getElementById('vip-email').focus();
            }, 500);
        });
    </script>
    <script>
        // Cr√©ation du graphique de bougies japonaises
        function createTradingChart() {
            const chart = document.getElementById('trading-chart');
            if (!chart) return;
            
            let currentPrice = 50;
            
            for (let i = 0; i < 40; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                candle.style.left = (i * 2.5) + '%';
                candle.style.animationDelay = (i * 0.1) + 's';
                
                const priceChange = (Math.random() - 0.5) * 10;
                currentPrice += priceChange;
                currentPrice = Math.max(20, Math.min(80, currentPrice));
                
                candle.style.bottom = currentPrice + '%';
                
                const wickTop = document.createElement('div');
                wickTop.className = 'candle-wick';
                wickTop.style.height = (Math.random() * 15 + 5) + 'px';
                
                const body = document.createElement('div');
                const isBullish = priceChange > 0;
                body.className = 'candle-body ' + (isBullish ? 'bullish' : 'bearish');
                body.style.height = (Math.random() * 25 + 10) + 'px';
                
                const wickBottom = document.createElement('div');
                wickBottom.className = 'candle-wick-bottom';
                wickBottom.style.height = (Math.random() * 10 + 3) + 'px';
                
                candle.appendChild(wickTop);
                candle.appendChild(body);
                candle.appendChild(wickBottom);
                chart.appendChild(candle);
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            createTradingChart();
            loadTestimonials();
            loadNews();
            loadCustomSections();
        });
        
        // Charger les sections personnalis√©es depuis Firebase
        async function loadCustomSections() {
            try {
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js');
                const { getFirestore, collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                
                const firebaseConfig = {
                    apiKey: "AIzaSyDSDK0NfVSs_VQb3TnrixiJbOpTsmoUMvU",
                    authDomain: "misterpips-b71fb.firebaseapp.com",
                    projectId: "misterpips-b71fb",
                    storageBucket: "misterpips-b71fb.firebasestorage.app",
                    messagingSenderId: "574231126409",
                    appId: "1:574231126409:web:b7ed93ac4ea62e247dc158"
                };
                
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                
                const sectionsSnapshot = await getDocs(collection(db, 'page_sections'));
                
                if (!sectionsSnapshot.empty) {
                    const sections = {};
                    sectionsSnapshot.docs.forEach(doc => {
                        const data = doc.data();
                        if (!sections[data.section] || new Date(data.lastModified) > new Date(sections[data.section].lastModified)) {
                            sections[data.section] = data;
                        }
                    });
                    
                    Object.keys(sections).forEach(sectionKey => {
                        const sectionData = sections[sectionKey];
                        const titleElement = document.getElementById(sectionKey + '-title');
                        const contentElement = document.getElementById(sectionKey + '-content');
                        
                        if (titleElement && sectionData.title) {
                            titleElement.textContent = sectionData.title;
                        }
                        
                        if (contentElement) {
                            if (sectionData.content && sectionData.content.trim()) {
                                // Afficher le contenu personnalis√©
                                let mediaHtml = '';
                                
                                if (sectionData.media) {
                                    if (sectionData.mediaType === 'image' || sectionData.mediaType === 'url') {
                                        mediaHtml = `<img src="${sectionData.media}" alt="${sectionData.title}" class="section-media">`;
                                    } else if (sectionData.mediaType === 'audio') {
                                        mediaHtml = `<audio controls class="section-media"><source src="${sectionData.media}" type="${sectionData.mediaType}"></audio>`;
                                    }
                                }
                                
                                contentElement.innerHTML = `
                                    <div class="custom-section-content">
                                        ${mediaHtml}
                                        <div class="section-text">
                                            ${sectionData.content.replace(/\n/g, '<br>')}
                                        </div>
                                    </div>
                                `;
                            } else if (sectionData.showConstruction !== false) {
                                // Afficher "En construction" si option activ√©e
                                contentElement.innerHTML = `
                                    <div class="construction-container">
                                        <div class="construction-icon">
                                            <i class="fas fa-hard-hat"></i>
                                        </div>
                                        <h3>Section en construction</h3>
                                        <p>Notre √©quipe travaille actuellement sur du contenu exceptionnel pour cette section.</p>
                                        <p>Revenez bient√¥t pour d√©couvrir nos services!</p>
                                    </div>
                                `;
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Erreur chargement sections:', error);
            }
        }
        
        // Fonction pour tracker le t√©l√©chargement de l'ebook avec Firebase
        async function trackEbookDownload() {
            console.log('T√©l√©chargement ebook d√©marr√©');
            
            try {
                // Importer Firebase pour le tracking
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js');
                const { getFirestore, collection, addDoc } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                
                const firebaseConfig = {
                    apiKey: "AIzaSyDSDK0NfVSs_VQb3TnrixiJbOpTsmoUMvU",
                    authDomain: "misterpips-b71fb.firebaseapp.com",
                    projectId: "misterpips-b71fb",
                    storageBucket: "misterpips-b71fb.firebasestorage.app",
                    messagingSenderId: "574231126409",
                    appId: "1:574231126409:web:b7ed93ac4ea62e247dc158"
                };
                
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                
                // Tracker le t√©l√©chargement
                await addDoc(collection(db, 'ebook_downloads'), {
                    timestamp: Date.now(),
                    date: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    page: 'index'
                });
                
                console.log('T√©l√©chargement track√© avec succ√®s');
            } catch (error) {
                console.error('Erreur tracking ebook:', error);
            }
            
            // V√©rifier si le fichier GitHub existe
            fetch('https://github.com/battama14/Misterpips/raw/e664f568b9b95d9853368e723f31f2cc9f9ff1c6/pips%20book2.pdf', { method: 'HEAD' })
                .then(response => {
                    if (!response.ok) {
                        console.error('Fichier PDF GitHub non trouv√©');
                        alert('Erreur: Le fichier PDF est temporairement indisponible. Veuillez r√©essayer plus tard.');
                    }
                })
                .catch(error => {
                    console.error('Erreur de chargement PDF GitHub:', error);
                });
        }
        
        window.trackEbookDownload = trackEbookDownload;
        
        // Charger les avis depuis Firebase
        async function loadTestimonials() {
            try {
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js');
                const { getFirestore, collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                
                const firebaseConfig = {
                    apiKey: "AIzaSyDSDK0NfVSs_VQb3TnrixiJbOpTsmoUMvU",
                    authDomain: "misterpips-b71fb.firebaseapp.com",
                    projectId: "misterpips-b71fb",
                    storageBucket: "misterpips-b71fb.firebasestorage.app",
                    messagingSenderId: "574231126409",
                    appId: "1:574231126409:web:b7ed93ac4ea62e247dc158"
                };
                
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                
                const testimonialsSnapshot = await getDocs(collection(db, 'testimonials'));
                const testimonials = testimonialsSnapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));
                
                const grid = document.getElementById('testimonials-grid');
                grid.innerHTML = '';
                
                if (testimonials.length === 0) {
                    grid.innerHTML = '<p class="no-testimonials">Aucun avis pour le moment</p>';
                    return;
                }
                
                testimonials.forEach(testimonial => {
                    const item = document.createElement('div');
                    item.className = 'testimonial-item';
                    item.innerHTML = `
                        <div class="testimonial-content">
                            <div class="testimonial-image">
                                <img src="${testimonial.image}" alt="Avis client">
                            </div>
                            <div class="testimonial-text">
                                <p>"${testimonial.text}"</p>
                                <div class="testimonial-author">- ${testimonial.author}</div>
                            </div>
                        </div>
                    `;
                    grid.appendChild(item);
                });
            } catch (error) {
                console.error('Erreur chargement avis:', error);
                const grid = document.getElementById('testimonials-grid');
                grid.innerHTML = '<p class="error-message">Erreur de chargement des avis</p>';
            }
        }
        
        // Charger les news depuis Firebase
        async function loadNews() {
            try {
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js');
                const { getFirestore, collection, getDocs } = await import('https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js');
                
                const firebaseConfig = {
                    apiKey: "AIzaSyDSDK0NfVSs_VQb3TnrixiJbOpTsmoUMvU",
                    authDomain: "misterpips-b71fb.firebaseapp.com",
                    projectId: "misterpips-b71fb",
                    storageBucket: "misterpips-b71fb.firebasestorage.app",
                    messagingSenderId: "574231126409",
                    appId: "1:574231126409:web:b7ed93ac4ea62e247dc158"
                };
                
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                
                const newsSnapshot = await getDocs(collection(db, 'public_news'));
                const news = newsSnapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));
                
                const grid = document.getElementById('news-grid');
                if (!grid) return;
                
                grid.innerHTML = '';
                
                if (news.length === 0) {
                    grid.innerHTML = '<p class="no-news">Aucune actualit√© pour le moment</p>';
                    return;
                }
                
                // Trier par date et afficher les 3 derni√®res
                news.sort((a, b) => new Date(b.date) - new Date(a.date))
                    .slice(0, 3)
                    .forEach(item => {
                        const newsItem = document.createElement('div');
                        newsItem.className = 'news-item';
                        newsItem.innerHTML = `
                            <div class="news-header">
                                <h3>${item.title}</h3>
                                <span class="news-priority priority-${item.priority}">${item.priority.toUpperCase()}</span>
                            </div>
                            <p class="news-content">${item.content}</p>
                            <div class="news-date">${new Date(item.date).toLocaleDateString('fr-FR')}</div>
                        `;
                        grid.appendChild(newsItem);
                    });
            } catch (error) {
                console.error('Erreur chargement news:', error);
                const grid = document.getElementById('news-grid');
                if (grid) {
                    grid.innerHTML = '<p class="error-message">Erreur de chargement des actualit√©s</p>';
                }
            }
        }
    </script>
    
    <!-- Popup personnalis√©e -->
    <div id="customPopup" class="custom-popup">
        <div class="popup-content">
            <div class="popup-icon">
                <i class="fas fa-crown"></i>
            </div>
            <div class="popup-title">F√©licitations !</div>
            <div class="popup-message" id="popupMessage"></div>
            <button class="popup-button" id="popupButton">Continuer</button>
        </div>
    </div>
    
    <script>
        function showCustomPopup(message, callback) {
            const popup = document.getElementById('customPopup');
            const messageEl = document.getElementById('popupMessage');
            const button = document.getElementById('popupButton');
            
            messageEl.textContent = message;
            popup.classList.add('show');
            
            button.onclick = () => {
                popup.classList.remove('show');
                setTimeout(() => {
                    if (callback) callback();
                }, 300);
            };
        }
    </script>
    
    <style>
        .vip-support-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 212, 255, 0.3);
            text-align: center;
        }
        
        .support-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .support-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 auto;
        }
        
        .support-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            background: linear-gradient(45deg, #ee5a52, #ff6b6b);
        }
        
        .support-button i {
            font-size: 16px;
        }
    </style>
</body>
</html>