<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test VIP Rapide</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background: #1a1a2e; color: white; }
        button { background: #00d4ff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .log { background: #000; color: #0f0; padding: 10px; border-radius: 5px; font-family: monospace; white-space: pre-wrap; max-height: 400px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>üîß Test VIP Rapide</h1>
    
    <button onclick="testFromIndex()">1Ô∏è‚É£ Test depuis index.html</button>
    <button onclick="testDirectAccess()">2Ô∏è‚É£ Test acc√®s direct VIP</button>
    <button onclick="clearSession()">üßπ Vider Session</button>
    
    <div id="log" class="log">Pr√™t pour les tests...\n</div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent += `[${timestamp}] ${message}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function testFromIndex() {
            log('üîÑ Test connexion depuis index.html...');
            
            // Simuler les donn√©es de session comme si on venait d'index.html
            sessionStorage.setItem('firebaseUID', 'IN82zuQySgg1OrG7QdXFF06mI7U2');
            sessionStorage.setItem('userEmail', 'kamel.lou@gmail.com');
            sessionStorage.setItem('authenticated', 'true');
            sessionStorage.setItem('isVIP', 'true');
            
            log('‚úÖ Session simul√©e cr√©√©e');
            log('üöÄ Tentative d\'acc√®s √† vip-space.html...');
            
            setTimeout(() => {
                window.location.href = 'vip-space.html';
            }, 1000);
        }
        
        function testDirectAccess() {
            log('üîÑ Test acc√®s direct...');
            window.location.href = 'direct-vip-access.html';
        }
        
        function clearSession() {
            sessionStorage.clear();
            log('üßπ Session vid√©e');
        }
        
        // V√©rifier l'√©tat actuel
        document.addEventListener('DOMContentLoaded', function() {
            const uid = sessionStorage.getItem('firebaseUID');
            const email = sessionStorage.getItem('userEmail');
            const auth = sessionStorage.getItem('authenticated');
            const vip = sessionStorage.getItem('isVIP');
            
            log('üìã √âtat actuel de la session:');
            log(`   - UID: ${uid || 'Non d√©fini'}`);
            log(`   - Email: ${email || 'Non d√©fini'}`);
            log(`   - Authentifi√©: ${auth || 'Non d√©fini'}`);
            log(`   - VIP: ${vip || 'Non d√©fini'}`);
            
            if (uid && email && auth === 'true' && vip === 'true') {
                log('‚úÖ Session VIP compl√®te d√©tect√©e');
            } else {
                log('‚ùå Session VIP incompl√®te');
            }
        });
    </script>
</body>
</html>